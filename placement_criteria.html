<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1a1d29;
            --bg-secondary: #242938;
            --bg-card: #2d3142;
            --text-primary: #e8eaed;
            --text-secondary: #9ca3af;
            --accent-blue: #4a90e2;
            --accent-green: #52c41a;
            --accent-gold: #faad14;
            --accent-purple: #9254de;
            --border-color: #3d4153;
            --hover-bg: #353849;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 0;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px 16px 120px;
        }

        /* Progress Bar */
        .progress-bar {
            position: sticky;
            top: 0;
            background: var(--bg-primary);
            padding: 12px 16px;
            margin: -20px -16px 20px;
            border-bottom: 1px solid var(--border-color);
            z-index: 100;
        }

        .progress-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-text {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .progress-count {
            font-size: 13px;
            font-weight: 600;
            color: var(--accent-blue);
        }

        .progress-track {
            height: 4px;
            background: var(--bg-secondary);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-green) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Criteria Section */
        .criteria-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            scroll-margin-top: 80px;
        }

        .criteria-section.completed {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(82, 196, 26, 0.05) 0%, rgba(74, 144, 226, 0.05) 100%);
        }

        .criteria-section.active {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.1);
        }

        .criteria-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .criteria-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            margin-right: 12px;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .criteria-section.completed .criteria-number {
            background: var(--accent-green);
            border-color: var(--accent-green);
            color: white;
        }

        .criteria-section.active .criteria-number {
            border-color: var(--accent-blue);
            background: var(--accent-blue);
            color: white;
        }

        .criteria-title-wrapper {
            flex: 1;
        }

        .criteria-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .criteria-description {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Help Button */
        .help-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .help-btn:hover {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        /* Help Tooltip */
        .help-tooltip {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 12px;
            margin-top: 12px;
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-secondary);
            display: none;
        }

        .help-tooltip.show {
            display: block;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-4px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 16px;
        }

        .options-grid.single-column {
            grid-template-columns: 1fr;
        }

        .option-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .option-card:hover {
            background: var(--hover-bg);
            border-color: var(--accent-blue);
        }

        .option-card.selected {
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.15) 0%, rgba(82, 196, 26, 0.1) 100%);
            border-color: var(--accent-blue);
        }

        .option-card.selected::before {
            content: '‚úì';
            position: absolute;
            top: 8px;
            right: 8px;
            width: 20px;
            height: 20px;
            background: var(--accent-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 700;
        }

        .option-icon {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }

        .option-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .option-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Time Picker */
        .time-picker {
            margin-top: 16px;
            display: none;
        }

        .time-picker.show {
            display: block;
        }

        .time-input-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .time-input-wrapper {
            position: relative;
        }

        .time-input-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 6px;
            display: block;
        }

        .time-input {
            width: 100%;
            padding: 12px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 15px;
            font-weight: 600;
            outline: none;
            transition: all 0.2s;
        }

        .time-input:focus {
            border-color: var(--accent-blue);
        }

        /* Suggested Times */
        .suggested-times {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .time-chip {
            padding: 6px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .time-chip:hover {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        /* Duration Slider */
        .duration-slider {
            margin-top: 16px;
        }

        .slider-wrapper {
            position: relative;
            margin: 20px 0;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--bg-secondary);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            border: 3px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.4);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            border: 3px solid var(--bg-primary);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.4);
        }

        .slider-value {
            text-align: center;
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-blue);
            margin-top: 12px;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        /* Action Buttons */
        .action-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, var(--bg-primary) 80%, transparent);
            padding: 16px;
            border-top: 1px solid var(--border-color);
            z-index: 99;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-green) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Summary Section */
        .summary-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid var(--accent-gold);
            display: none;
        }

        .summary-section.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .summary-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .summary-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent-blue);
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                padding: 16px 12px 100px;
            }

            .criteria-section {
                padding: 16px;
            }

            .header h1 {
                font-size: 22px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Scroll Behavior */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress-container">
            <span class="progress-text" id="progressText">–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤</span>
            <span class="progress-count" id="progressCount">0/5</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 id="pageTitle">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</h1>
            <p id="pageSubtitle">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∞—à–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</p>
        </div>

        <!-- Criterion 1: Placement Type -->
        <div class="criteria-section active" id="criterion1" data-criterion="placementType">
            <div class="criteria-header">
                <div class="criteria-number">1</div>
                <div class="criteria-title-wrapper">
                    <div class="criteria-title">
                        <span id="criterion1Title">–¢–∏–ø —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</span>
                        <span class="help-btn" onclick="toggleHelp('help1')">?</span>
                    </div>
                    <div class="criteria-description" id="criterion1Desc">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–æ–≤—É—é –ø—É–±–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É</div>
                </div>
            </div>
            <div class="help-tooltip" id="help1">
                <strong>‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞:</strong><br>
                ‚Ä¢ <strong>–†–∞–∑–æ–≤–æ–µ</strong> ‚Äî –æ–¥–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤–∞—à–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è<br>
                ‚Ä¢ <strong>–ü–æ–¥–ø–∏—Å–∫–∞</strong> ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏
            </div>
            <div class="options-grid">
                <div class="option-card" onclick="selectOption('placementType', 'onetime', this)">
                    <span class="option-icon">üìù</span>
                    <div class="option-title" id="placementOneTime">–†–∞–∑–æ–≤–æ–µ</div>
                    <div class="option-subtitle" id="placementOneTimeDesc">–û–¥–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è</div>
                </div>
                <div class="option-card" onclick="selectOption('placementType', 'subscription', this)">
                    <span class="option-icon">üîÑ</span>
                    <div class="option-title" id="placementSubscription">–ü–æ–¥–ø–∏—Å–∫–∞</div>
                    <div class="option-subtitle" id="placementSubscriptionDesc">–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</div>
                </div>
            </div>
        </div>

        <!-- Criterion 2: Publication Time -->
        <div class="criteria-section" id="criterion2" data-criterion="publicationTime">
            <div class="criteria-header">
                <div class="criteria-number">2</div>
                <div class="criteria-title-wrapper">
                    <div class="criteria-title">
                        <span id="criterion2Title">–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</span>
                        <span class="help-btn" onclick="toggleHelp('help2')">?</span>
                    </div>
                    <div class="criteria-description" id="criterion2Desc">–ö–æ–≥–¥–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</div>
                </div>
            </div>
            <div class="help-tooltip" id="help2">
                <strong>‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞:</strong><br>
                ‚Ä¢ <strong>–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ</strong> ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã<br>
                ‚Ä¢ <strong>–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é</strong> ‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –æ—Ö–≤–∞—Ç–∞ –∞—É–¥–∏—Ç–æ—Ä–∏–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º: 9:00, 13:00, 18:00 ‚Äî –ø–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            </div>
            <div class="options-grid">
                <div class="option-card" onclick="selectOption('publicationTime', 'immediate', this)">
                    <span class="option-icon">‚ö°</span>
                    <div class="option-title" id="pubTimeImmediate">–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ</div>
                    <div class="option-subtitle" id="pubTimeImmediateDesc">–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã</div>
                </div>
                <div class="option-card" onclick="selectOption('publicationTime', 'scheduled', this)">
                    <span class="option-icon">üìÖ</span>
                    <div class="option-title" id="pubTimeScheduled">–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é</div>
                    <div class="option-subtitle" id="pubTimeScheduledDesc">–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è</div>
                </div>
            </div>
            <div class="time-picker" id="timePicker">
                <div class="time-input-group">
                    <div class="time-input-wrapper">
                        <label class="time-input-label" id="labelDate">–î–∞—Ç–∞</label>
                        <input type="date" class="time-input" id="scheduleDate">
                    </div>
                    <div class="time-input-wrapper">
                        <label class="time-input-label" id="labelTime">–í—Ä–µ–º—è</label>
                        <input type="time" class="time-input" id="scheduleTime">
                    </div>
                </div>
                <div class="time-input-label" id="labelSuggested">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è (–ø–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏):</div>
                <div class="suggested-times">
                    <span class="time-chip" onclick="setSuggestedTime('09:00')">üåÖ 9:00</span>
                    <span class="time-chip" onclick="setSuggestedTime('13:00')">‚òÄÔ∏è 13:00</span>
                    <span class="time-chip" onclick="setSuggestedTime('18:00')">üåÜ 18:00</span>
                    <span class="time-chip" onclick="setSuggestedTime('21:00')">üåô 21:00</span>
                </div>
            </div>
        </div>

        <!-- Criterion 3: Pinning -->
        <div class="criteria-section" id="criterion3" data-criterion="pinning">
            <div class="criteria-header">
                <div class="criteria-number">3</div>
                <div class="criteria-title-wrapper">
                    <div class="criteria-title">
                        <span id="criterion3Title">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ</span>
                        <span class="help-btn" onclick="toggleHelp('help3')">?</span>
                    </div>
                    <div class="criteria-description" id="criterion3Desc">–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö—É –∫–∞–Ω–∞–ª–∞</div>
                </div>
            </div>
            <div class="help-tooltip" id="help3">
                <strong>‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞:</strong><br>
                ‚Ä¢ <strong>–ë–µ–∑ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è</strong> ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –æ–±—â–µ–π –ª–µ–Ω—Ç–µ<br>
                ‚Ä¢ <strong>–ó–∞–∫—Ä–µ–ø–∏—Ç—å</strong> ‚Äî –ø–æ—Å—Ç –±—É–¥–µ—Ç –≤ —Ç–æ–ø–µ –∫–∞–Ω–∞–ª–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ–∫: –æ—Ç 1 –¥–Ω—è –¥–æ –Ω–µ–¥–µ–ª–∏
            </div>
            <div class="options-grid">
                <div class="option-card" onclick="selectOption('pinning', 'no', this)">
                    <span class="option-icon">üìÑ</span>
                    <div class="option-title" id="pinNo">–ë–µ–∑ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è</div>
                    <div class="option-subtitle" id="pinNoDesc">–í –æ–±—â–µ–π –ª–µ–Ω—Ç–µ</div>
                </div>
                <div class="option-card" onclick="selectOption('pinning', 'yes', this)">
                    <span class="option-icon">üìå</span>
                    <div class="option-title" id="pinYes">–ó–∞–∫—Ä–µ–ø–∏—Ç—å</div>
                    <div class="option-subtitle" id="pinYesDesc">–í —Ç–æ–ø–µ –∫–∞–Ω–∞–ª–∞</div>
                </div>
            </div>
            <div class="time-picker" id="pinDurationPicker">
                <div class="time-input-label" id="labelPinDuration">–°—Ä–æ–∫ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è:</div>
                <div class="suggested-times">
                    <span class="time-chip" onclick="setPinDuration('1')">1 –¥–µ–Ω—å</span>
                    <span class="time-chip" onclick="setPinDuration('3')">3 –¥–Ω—è</span>
                    <span class="time-chip" onclick="setPinDuration('7')">7 –¥–Ω–µ–π</span>
                </div>
            </div>
        </div>

        <!-- Criterion 4: Ad Format -->
        <div class="criteria-section" id="criterion4" data-criterion="adFormat">
            <div class="criteria-header">
                <div class="criteria-number">4</div>
                <div class="criteria-title-wrapper">
                    <div class="criteria-title">
                        <span id="criterion4Title">–§–æ—Ä–º–∞—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è</span>
                        <span class="help-btn" onclick="toggleHelp('help4')">?</span>
                    </div>
                    <div class="criteria-description" id="criterion4Desc">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞</div>
                </div>
            </div>
            <div class="help-tooltip" id="help4">
                <strong>‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞:</strong><br>
                ‚Ä¢ <strong>–¢–µ–∫—Å—Ç</strong> ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ<br>
                ‚Ä¢ <strong>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</strong> ‚Äî —Ç–µ–∫—Å—Ç + –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)<br>
                ‚Ä¢ <strong>–í–∏–¥–µ–æ</strong> ‚Äî —Ç–µ–∫—Å—Ç + –≤–∏–¥–µ–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–æ–≤–ª–µ—á–µ–Ω–∏—è<br>
                ‚Ä¢ <strong>–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</strong> ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –∏–ª–∏ –º–∏–∫—Å –º–µ–¥–∏–∞
            </div>
            <div class="options-grid">
                <div class="option-card" onclick="selectOption('adFormat', 'text', this)">
                    <span class="option-icon">üìù</span>
                    <div class="option-title" id="formatText">–¢–µ–∫—Å—Ç</div>
                    <div class="option-subtitle" id="formatTextDesc">–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç</div>
                </div>
                <div class="option-card" onclick="selectOption('adFormat', 'image', this)">
                    <span class="option-icon">üñºÔ∏è</span>
                    <div class="option-title" id="formatImage">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
                    <div class="option-subtitle" id="formatImageDesc">–¢–µ–∫—Å—Ç + —Ñ–æ—Ç–æ</div>
                </div>
                <div class="option-card" onclick="selectOption('adFormat', 'video', this)">
                    <span class="option-icon">üé¨</span>
                    <div class="option-title" id="formatVideo">–í–∏–¥–µ–æ</div>
                    <div class="option-subtitle" id="formatVideoDesc">–¢–µ–∫—Å—Ç + –≤–∏–¥–µ–æ</div>
                </div>
                <div class="option-card" onclick="selectOption('adFormat', 'combined', this)">
                    <span class="option-icon">üé®</span>
                    <div class="option-title" id="formatCombined">–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</div>
                    <div class="option-subtitle" id="formatCombinedDesc">–ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ–¥–∏–∞</div>
                </div>
            </div>
        </div>

        <!-- Criterion 5: Visibility Duration -->
        <div class="criteria-section" id="criterion5" data-criterion="visibilityDuration">
            <div class="criteria-header">
                <div class="criteria-number">5</div>
                <div class="criteria-title-wrapper">
                    <div class="criteria-title">
                        <span id="criterion5Title">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏</span>
                        <span class="help-btn" onclick="toggleHelp('help5')">?</span>
                    </div>
                    <div class="criteria-description" id="criterion5Desc">–°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º</div>
                </div>
            </div>
            <div class="help-tooltip" id="help5">
                <strong>‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞:</strong><br>
                –û–±—ä—è–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –≤ –∫–∞–Ω–∞–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–Ω–æ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–µ–Ω–æ –∏–ª–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ.<br>
                ‚Ä¢ <strong>3-7 –¥–Ω–µ–π</strong> ‚Äî –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π<br>
                ‚Ä¢ <strong>14-30 –¥–Ω–µ–π</strong> ‚Äî –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
            </div>
            <div class="duration-slider">
                <input type="range" min="1" max="90" value="7" class="slider" id="durationSlider" oninput="updateDuration(this.value)">
                <div class="slider-value">
                    <span id="durationValue">7</span> <span id="durationLabel">–¥–Ω–µ–π</span>
                </div>
                <div class="slider-labels">
                    <span>1 –¥–µ–Ω—å</span>
                    <span>90 –¥–Ω–µ–π</span>
                </div>
            </div>
        </div>

        <!-- Summary Section -->
        <div class="summary-section" id="summarySection">
            <div class="summary-title">
                <span>üìã</span>
                <span id="summaryTitle">–ò—Ç–æ–≥–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</span>
            </div>
            <div class="summary-item">
                <span class="summary-label" id="summaryLabel1">–¢–∏–ø —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:</span>
                <span class="summary-value" id="summaryValue1">-</span>
            </div>
            <div class="summary-item">
                <span class="summary-label" id="summaryLabel2">–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:</span>
                <span class="summary-value" id="summaryValue2">-</span>
            </div>
            <div class="summary-item">
                <span class="summary-label" id="summaryLabel3">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ:</span>
                <span class="summary-value" id="summaryValue3">-</span>
            </div>
            <div class="summary-item">
                <span class="summary-label" id="summaryLabel4">–§–æ—Ä–º–∞—Ç:</span>
                <span class="summary-value" id="summaryValue4">-</span>
            </div>
            <div class="summary-item">
                <span class="summary-label" id="summaryLabel5">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                <span class="summary-value" id="summaryValue5">-</span>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="btn btn-primary" id="submitBtn" onclick="submitCriteria()" disabled>
            <span id="btnText">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏</span>
            <span>‚Üí</span>
        </button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // Selection state
        const selections = {
            placementType: null,
            publicationTime: null,
            scheduleDate: null,
            scheduleTime: null,
            pinning: null,
            pinDuration: null,
            adFormat: null,
            visibilityDuration: 7
        };

        // Language detection
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get('lang');
        
        let userLang = 'ru';
        
        if (urlLang) {
            userLang = urlLang;
        } else if (tg.initDataUnsafe?.user?.language_code) {
            userLang = tg.initDataUnsafe.user.language_code;
        } else if (navigator.language) {
            userLang = navigator.language;
        }
        
        let lang = userLang.toLowerCase();
        
        if (lang.startsWith('zh')) {
            lang = 'zh';
        } else {
            lang = lang.substring(0, 2);
        }
        
        if (!['ru', 'en', 'zh'].includes(lang)) {
            lang = 'ru';
        }

        // Translations
        const translations = {
            ru: {
                pageTitle: '‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è',
                pageSubtitle: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∞—à–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è',
                progressText: '–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤',
                criterion1Title: '–¢–∏–ø —Ä–∞–∑–º–µ—â–µ–Ω–∏—è',
                criterion1Desc: '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–æ–≤—É—é –ø—É–±–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É',
                criterion2Title: '–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏',
                criterion2Desc: '–ö–æ–≥–¥–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ',
                criterion3Title: '–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ',
                criterion3Desc: '–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö—É –∫–∞–Ω–∞–ª–∞',
                criterion4Title: '–§–æ—Ä–º–∞—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è',
                criterion4Desc: '–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞',
                criterion5Title: '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏',
                criterion5Desc: '–°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º',
                placementOneTime: '–†–∞–∑–æ–≤–æ–µ',
                placementOneTimeDesc: '–û–¥–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è',
                placementSubscription: '–ü–æ–¥–ø–∏—Å–∫–∞',
                placementSubscriptionDesc: '–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏',
                pubTimeImmediate: '–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ',
                pubTimeImmediateDesc: '–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã',
                pubTimeScheduled: '–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é',
                pubTimeScheduledDesc: '–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è',
                pinNo: '–ë–µ–∑ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è',
                pinNoDesc: '–í –æ–±—â–µ–π –ª–µ–Ω—Ç–µ',
                pinYes: '–ó–∞–∫—Ä–µ–ø–∏—Ç—å',
                pinYesDesc: '–í —Ç–æ–ø–µ –∫–∞–Ω–∞–ª–∞',
                formatText: '–¢–µ–∫—Å—Ç',
                formatTextDesc: '–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç',
                formatImage: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                formatImageDesc: '–¢–µ–∫—Å—Ç + —Ñ–æ—Ç–æ',
                formatVideo: '–í–∏–¥–µ–æ',
                formatVideoDesc: '–¢–µ–∫—Å—Ç + –≤–∏–¥–µ–æ',
                formatCombined: '–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                formatCombinedDesc: '–ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ–¥–∏–∞',
                summaryTitle: '–ò—Ç–æ–≥–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã',
                summaryLabel1: '–¢–∏–ø —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:',
                summaryLabel2: '–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:',
                summaryLabel3: '–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ:',
                summaryLabel4: '–§–æ—Ä–º–∞—Ç:',
                summaryLabel5: '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:',
                btnTextIncomplete: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏',
                btnTextComplete: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫ –≤—ã–±–æ—Ä—É —Ç–∞—Ä–∏—Ñ–∞',
                labelDate: '–î–∞—Ç–∞',
                labelTime: '–í—Ä–µ–º—è',
                labelSuggested: '‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è (–ø–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏):',
                labelPinDuration: '–°—Ä–æ–∫ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è:',
                durationLabel: '–¥–Ω–µ–π'
            },
            en: {
                pageTitle: '‚öôÔ∏è Placement Settings',
                pageSubtitle: 'Configure your ad publication parameters',
                progressText: 'Completing criteria',
                criterion1Title: 'Placement Type',
                criterion1Desc: 'Choose one-time or subscription',
                criterion2Title: 'Publication Time',
                criterion2Desc: 'When to publish the ad',
                criterion3Title: 'Pinning',
                criterion3Desc: 'Pin ad at the top of the channel',
                criterion4Title: 'Ad Format',
                criterion4Desc: 'Choose media content format',
                criterion5Title: 'Visibility Duration',
                criterion5Desc: 'How many days the ad will be active',
                placementOneTime: 'One-time',
                placementOneTimeDesc: 'Single publication',
                placementSubscription: 'Subscription',
                placementSubscriptionDesc: 'Regular publications',
                pubTimeImmediate: 'Immediately',
                pubTimeImmediateDesc: 'Right after payment',
                pubTimeScheduled: 'Scheduled',
                pubTimeScheduledDesc: 'Choose time',
                pinNo: 'No pinning',
                pinNoDesc: 'In general feed',
                pinYes: 'Pin',
                pinYesDesc: 'At channel top',
                formatText: 'Text',
                formatTextDesc: 'Text only',
                formatImage: 'Image',
                formatImageDesc: 'Text + photo',
                formatVideo: 'Video',
                formatVideoDesc: 'Text + video',
                formatCombined: 'Combined',
                formatCombinedDesc: 'Multiple media',
                summaryTitle: 'Final Parameters',
                summaryLabel1: 'Placement type:',
                summaryLabel2: 'Publication time:',
                summaryLabel3: 'Pinning:',
                summaryLabel4: 'Format:',
                summaryLabel5: 'Duration:',
                btnTextIncomplete: 'Select all criteria',
                btnTextComplete: 'Continue to tariff selection',
                labelDate: 'Date',
                labelTime: 'Time',
                labelSuggested: '‚≠ê Suggested time (peak activity):',
                labelPinDuration: 'Pin duration:',
                durationLabel: 'days'
            },
            zh: {
                pageTitle: '‚öôÔ∏è ÁôºÂ∏ÉË®≠ÁΩÆ',
                pageSubtitle: 'ÈÖçÁΩÆÊÇ®ÁöÑÂª£ÂëäÁôºÂ∏ÉÂèÉÊï∏',
                progressText: 'Â°´ÂØ´Ê®ôÊ∫ñ',
                criterion1Title: 'ÁôºÂ∏ÉÈ°ûÂûã',
                criterion1Desc: 'ÈÅ∏Êìá‰∏ÄÊ¨°ÊÄßÊàñË®ÇÈñ±',
                criterion2Title: 'ÁôºÂ∏ÉÊôÇÈñì',
                criterion2Desc: '‰ΩïÊôÇÁôºÂ∏ÉÂª£Âëä',
                criterion3Title: 'ÁΩÆÈ†Ç',
                criterion3Desc: 'Â∞áÂª£ÂëäÁΩÆÈ†ÇÊñºÈ†ªÈÅìÈ†ÇÈÉ®',
                criterion4Title: 'Âª£ÂëäÊ†ºÂºè',
                criterion4Desc: 'ÈÅ∏ÊìáÂ™íÈ´îÂÖßÂÆπÊ†ºÂºè',
                criterion5Title: 'ÂèØË¶ãÊôÇÈï∑',
                criterion5Desc: 'Âª£Âëä‰øùÊåÅÊ¥ªË∫çÁöÑÂ§©Êï∏',
                placementOneTime: '‰∏ÄÊ¨°ÊÄß',
                placementOneTimeDesc: 'ÂñÆÊ¨°ÁôºÂ∏É',
                placementSubscription: 'Ë®ÇÈñ±',
                placementSubscriptionDesc: 'ÂÆöÊúüÁôºÂ∏É',
                pubTimeImmediate: 'Á´ãÂç≥',
                pubTimeImmediateDesc: '‰ªòÊ¨æÂæåÁ´ãÂç≥',
                pubTimeScheduled: 'È†êÂÆö',
                pubTimeScheduledDesc: 'ÈÅ∏ÊìáÊôÇÈñì',
                pinNo: '‰∏çÁΩÆÈ†Ç',
                pinNoDesc: 'Âú®ÊôÆÈÄöË®äÊÅØÊµÅ‰∏≠',
                pinYes: 'ÁΩÆÈ†Ç',
                pinYesDesc: 'Âú®È†ªÈÅìÈ†ÇÈÉ®',
                formatText: 'ÊñáÂ≠ó',
                formatTextDesc: 'ÂÉÖÊñáÂ≠ó',
                formatImage: 'ÂúñÁâá',
                formatImageDesc: 'ÊñáÂ≠ó+ÂúñÁâá',
                formatVideo: 'Ë¶ñÈ†ª',
                formatVideoDesc: 'ÊñáÂ≠ó+Ë¶ñÈ†ª',
                formatCombined: 'ÁµÑÂêà',
                formatCombinedDesc: 'Â§öÂÄãÂ™íÈ´î',
                summaryTitle: 'ÊúÄÁµÇÂèÉÊï∏',
                summaryLabel1: 'ÁôºÂ∏ÉÈ°ûÂûãÔºö',
                summaryLabel2: 'ÁôºÂ∏ÉÊôÇÈñìÔºö',
                summaryLabel3: 'ÁΩÆÈ†ÇÔºö',
                summaryLabel4: 'Ê†ºÂºèÔºö',
                summaryLabel5: 'ÊôÇÈï∑Ôºö',
                btnTextIncomplete: 'ÈÅ∏ÊìáÊâÄÊúâÊ®ôÊ∫ñ',
                btnTextComplete: 'ÁπºÁ∫åÈÅ∏ÊìáÊñπÊ°à',
                labelDate: 'Êó•Êúü',
                labelTime: 'ÊôÇÈñì',
                labelSuggested: '‚≠ê Âª∫Ë≠∞ÊôÇÈñìÔºàÈ´òÂ≥∞ÊúüÔºâÔºö',
                labelPinDuration: 'ÁΩÆÈ†ÇÊúüÈôêÔºö',
                durationLabel: 'Â§©'
            }
        };

        // Apply translations
        function applyTranslations() {
            const t = translations[lang];
            document.getElementById('pageTitle').textContent = t.pageTitle;
            document.getElementById('pageSubtitle').textContent = t.pageSubtitle;
            document.getElementById('progressText').textContent = t.progressText;
            
            // Criteria titles
            document.getElementById('criterion1Title').textContent = t.criterion1Title;
            document.getElementById('criterion1Desc').textContent = t.criterion1Desc;
            document.getElementById('criterion2Title').textContent = t.criterion2Title;
            document.getElementById('criterion2Desc').textContent = t.criterion2Desc;
            document.getElementById('criterion3Title').textContent = t.criterion3Title;
            document.getElementById('criterion3Desc').textContent = t.criterion3Desc;
            document.getElementById('criterion4Title').textContent = t.criterion4Title;
            document.getElementById('criterion4Desc').textContent = t.criterion4Desc;
            document.getElementById('criterion5Title').textContent = t.criterion5Title;
            document.getElementById('criterion5Desc').textContent = t.criterion5Desc;
            
            // Options
            document.getElementById('placementOneTime').textContent = t.placementOneTime;
            document.getElementById('placementOneTimeDesc').textContent = t.placementOneTimeDesc;
            document.getElementById('placementSubscription').textContent = t.placementSubscription;
            document.getElementById('placementSubscriptionDesc').textContent = t.placementSubscriptionDesc;
            document.getElementById('pubTimeImmediate').textContent = t.pubTimeImmediate;
            document.getElementById('pubTimeImmediateDesc').textContent = t.pubTimeImmediateDesc;
            document.getElementById('pubTimeScheduled').textContent = t.pubTimeScheduled;
            document.getElementById('pubTimeScheduledDesc').textContent = t.pubTimeScheduledDesc;
            document.getElementById('pinNo').textContent = t.pinNo;
            document.getElementById('pinNoDesc').textContent = t.pinNoDesc;
            document.getElementById('pinYes').textContent = t.pinYes;
            document.getElementById('pinYesDesc').textContent = t.pinYesDesc;
            document.getElementById('formatText').textContent = t.formatText;
            document.getElementById('formatTextDesc').textContent = t.formatTextDesc;
            document.getElementById('formatImage').textContent = t.formatImage;
            document.getElementById('formatImageDesc').textContent = t.formatImageDesc;
            document.getElementById('formatVideo').textContent = t.formatVideo;
            document.getElementById('formatVideoDesc').textContent = t.formatVideoDesc;
            document.getElementById('formatCombined').textContent = t.formatCombined;
            document.getElementById('formatCombinedDesc').textContent = t.formatCombinedDesc;
            
            // Summary
            document.getElementById('summaryTitle').textContent = t.summaryTitle;
            document.getElementById('summaryLabel1').textContent = t.summaryLabel1;
            document.getElementById('summaryLabel2').textContent = t.summaryLabel2;
            document.getElementById('summaryLabel3').textContent = t.summaryLabel3;
            document.getElementById('summaryLabel4').textContent = t.summaryLabel4;
            document.getElementById('summaryLabel5').textContent = t.summaryLabel5;
            
            // Labels
            document.getElementById('labelDate').textContent = t.labelDate;
            document.getElementById('labelTime').textContent = t.labelTime;
            document.getElementById('labelSuggested').textContent = t.labelSuggested;
            document.getElementById('labelPinDuration').textContent = t.labelPinDuration;
            document.getElementById('durationLabel').textContent = t.durationLabel;
            
            // Button
            document.getElementById('btnText').textContent = t.btnTextIncomplete;
        }

        applyTranslations();

        // Toggle help tooltip
        function toggleHelp(helpId) {
            const help = document.getElementById(helpId);
            help.classList.toggle('show');
        }

        // Select option
        function selectOption(criterion, value, card) {
            // Remove selection from siblings
            const parent = card.parentElement;
            parent.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
            
            // Add selection to clicked card
            card.classList.add('selected');
            
            // Update selection state
            selections[criterion] = value;
            
            // Handle special cases
            if (criterion === 'publicationTime') {
                const timePicker = document.getElementById('timePicker');
                if (value === 'scheduled') {
                    timePicker.classList.add('show');
                    // Set default date to tomorrow
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    document.getElementById('scheduleDate').value = tomorrow.toISOString().split('T')[0];
                    document.getElementById('scheduleTime').value = '09:00';
                    selections.scheduleDate = tomorrow.toISOString().split('T')[0];
                    selections.scheduleTime = '09:00';
                } else {
                    timePicker.classList.remove('show');
                    selections.scheduleDate = null;
                    selections.scheduleTime = null;
                }
            }
            
            if (criterion === 'pinning') {
                const pinDurationPicker = document.getElementById('pinDurationPicker');
                if (value === 'yes') {
                    pinDurationPicker.classList.add('show');
                    selections.pinDuration = '3'; // default
                } else {
                    pinDurationPicker.classList.remove('show');
                    selections.pinDuration = null;
                }
            }
            
            // Mark section as completed
            const section = document.getElementById('criterion' + getCriterionNumber(criterion));
            section.classList.add('completed');
            section.classList.remove('active');
            
            // Update progress
            updateProgress();
            
            // Scroll to next criterion
            scrollToNextCriterion(criterion);
            
            // Update summary
            updateSummary();
        }

        // Get criterion number
        function getCriterionNumber(criterion) {
            const map = {
                'placementType': '1',
                'publicationTime': '2',
                'pinning': '3',
                'adFormat': '4',
                'visibilityDuration': '5'
            };
            return map[criterion];
        }

        // Scroll to next criterion
        function scrollToNextCriterion(currentCriterion) {
            const criteriaOrder = ['placementType', 'publicationTime', 'pinning', 'adFormat', 'visibilityDuration'];
            const currentIndex = criteriaOrder.indexOf(currentCriterion);
            
            if (currentIndex < criteriaOrder.length - 1) {
                const nextCriterion = criteriaOrder[currentIndex + 1];
                const nextSection = document.querySelector(`[data-criterion="${nextCriterion}"]`);
                
                // Mark next as active
                nextSection.classList.add('active');
                
                // Smooth scroll with offset for sticky header
                setTimeout(() => {
                    nextSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 300);
            }
        }

        // Update progress
        function updateProgress() {
            let completed = 0;
            const total = 5;
            
            if (selections.placementType) completed++;
            if (selections.publicationTime) completed++;
            if (selections.pinning) completed++;
            if (selections.adFormat) completed++;
            if (selections.visibilityDuration) completed++;
            
            const percentage = (completed / total) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressCount').textContent = `${completed}/${total}`;
            
            // Enable submit button if all selected
            const submitBtn = document.getElementById('submitBtn');
            const t = translations[lang];
            
            if (completed === total) {
                submitBtn.disabled = false;
                document.getElementById('btnText').textContent = t.btnTextComplete;
                document.getElementById('summarySection').classList.add('show');
            } else {
                submitBtn.disabled = true;
                document.getElementById('btnText').textContent = t.btnTextIncomplete;
            }
        }

        // Update duration
        function updateDuration(value) {
            selections.visibilityDuration = parseInt(value);
            document.getElementById('durationValue').textContent = value;
            
            // Mark as completed
            const section = document.getElementById('criterion5');
            section.classList.add('completed');
            
            updateProgress();
            updateSummary();
        }

        // Set suggested time
        function setSuggestedTime(time) {
            document.getElementById('scheduleTime').value = time;
            selections.scheduleTime = time;
            updateSummary();
        }

        // Set pin duration
        function setPinDuration(days) {
            selections.pinDuration = days;
            // Highlight selected chip
            const chips = document.querySelectorAll('#pinDurationPicker .time-chip');
            chips.forEach(chip => {
                if (chip.textContent.includes(days)) {
                    chip.style.background = 'var(--accent-blue)';
                    chip.style.borderColor = 'var(--accent-blue)';
                    chip.style.color = 'white';
                } else {
                    chip.style.background = 'var(--bg-secondary)';
                    chip.style.borderColor = 'var(--border-color)';
                    chip.style.color = 'var(--text-primary)';
                }
            });
            updateSummary();
        }

        // Update summary
        function updateSummary() {
            const t = translations[lang];
            
            // Placement type
            if (selections.placementType) {
                const value = selections.placementType === 'onetime' ? t.placementOneTime : t.placementSubscription;
                document.getElementById('summaryValue1').textContent = value;
            }
            
            // Publication time
            if (selections.publicationTime) {
                let value = t.pubTimeImmediate;
                if (selections.publicationTime === 'scheduled' && selections.scheduleDate && selections.scheduleTime) {
                    value = `${selections.scheduleDate} ${selections.scheduleTime}`;
                }
                document.getElementById('summaryValue2').textContent = value;
            }
            
            // Pinning
            if (selections.pinning) {
                let value = t.pinNo;
                if (selections.pinning === 'yes' && selections.pinDuration) {
                    value = `${t.pinYes} (${selections.pinDuration} ${t.durationLabel})`;
                }
                document.getElementById('summaryValue3').textContent = value;
            }
            
            // Format
            if (selections.adFormat) {
                const formatMap = {
                    'text': t.formatText,
                    'image': t.formatImage,
                    'video': t.formatVideo,
                    'combined': t.formatCombined
                };
                document.getElementById('summaryValue4').textContent = formatMap[selections.adFormat];
            }
            
            // Duration
            if (selections.visibilityDuration) {
                document.getElementById('summaryValue5').textContent = `${selections.visibilityDuration} ${t.durationLabel}`;
            }
        }

        // Submit criteria
        function submitCriteria() {
            // Validate date/time inputs if scheduled
            if (selections.publicationTime === 'scheduled') {
                selections.scheduleDate = document.getElementById('scheduleDate').value;
                selections.scheduleTime = document.getElementById('scheduleTime').value;
            }
            
            // Send data to bot
            tg.sendData(JSON.stringify(selections));
        }

        // Set theme colors
        tg.setHeaderColor('#1a1d29');
        tg.setBackgroundColor('#1a1d29');
    </script>
</body>
</html>
