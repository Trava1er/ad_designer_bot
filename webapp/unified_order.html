<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1a1d29;
            --bg-secondary: #242938;
            --bg-card: #2d3142;
            --text-primary: #e8eaed;
            --text-secondary: #9ca3af;
            --accent-blue: #4a90e2;
            --accent-green: #52c41a;
            --accent-gold: #faad14;
            --accent-purple: #9254de;
            --accent-red: #ff4d4f;
            --border-color: #3d4153;
            --hover-bg: #353849;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 0;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px 16px 140px;
        }

        /* Progress Bar - Sticky */
        .progress-bar {
            position: sticky;
            top: 0;
            background: var(--bg-primary);
            padding: 16px;
            margin: -20px -16px 24px;
            border-bottom: 1px solid var(--border-color);
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .progress-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .progress-text {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-count {
            font-size: 14px;
            font-weight: 700;
            color: var(--accent-blue);
        }

        .progress-track {
            height: 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue) 0%, var(--accent-green) 100%);
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 3px;
        }

        /* Section Styling */
        .section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 24px 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            opacity: 0.5;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .section.active {
            opacity: 1;
            pointer-events: auto;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 1px var(--accent-blue);
        }

        .section.completed {
            opacity: 0.8;
            pointer-events: none;
            border-color: var(--accent-green);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .section-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            flex-shrink: 0;
        }

        .section.active .section-number {
            background: var(--accent-blue);
            color: white;
        }

        .section.completed .section-number {
            background: var(--accent-green);
            color: white;
        }

        .section-title {
            flex: 1;
        }

        .section-title h2 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .section-title p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .help-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 700;
            font-size: 14px;
            color: var(--accent-blue);
            transition: all 0.2s;
        }

        .help-icon:hover {
            background: var(--accent-blue);
            color: white;
            transform: scale(1.1);
        }

        /* Tariff Cards */
        .tariff-grid {
            display: grid;
            gap: 12px;
        }

        .tariff-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .tariff-card:hover {
            background: var(--hover-bg);
            transform: translateY(-2px);
        }

        .tariff-card.selected {
            border-color: var(--accent-blue);
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.1) 0%, rgba(82, 196, 26, 0.1) 100%);
        }

        .tariff-card.selected::after {
            content: '‚úì';
            position: absolute;
            top: 16px;
            right: 16px;
            width: 28px;
            height: 28px;
            background: var(--accent-green);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
        }

        .tariff-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .tariff-badge.basic {
            background: var(--accent-blue);
            color: white;
        }

        .tariff-badge.standard {
            background: var(--accent-gold);
            color: white;
        }

        .tariff-badge.premium {
            background: var(--accent-purple);
            color: white;
        }

        .tariff-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .tariff-price {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent-green);
            margin-bottom: 16px;
        }

        .tariff-price small {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .tariff-features {
            list-style: none;
        }

        .tariff-features li {
            padding: 8px 0;
            font-size: 14px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tariff-features li::before {
            content: '‚úì';
            color: var(--accent-green);
            font-weight: 700;
            font-size: 16px;
        }

        /* Option Buttons */
        .option-grid {
            display: grid;
            gap: 12px;
        }

        .option-btn {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 14px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .option-btn:hover {
            background: var(--hover-bg);
            border-color: var(--accent-blue);
        }

        .option-btn.selected {
            border-color: var(--accent-blue);
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.15) 0%, rgba(82, 196, 26, 0.15) 100%);
        }

        .option-icon {
            width: 48px;
            height: 48px;
            background: var(--bg-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .option-btn.selected .option-icon {
            background: var(--accent-blue);
        }

        .option-content {
            flex: 1;
        }

        .option-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .option-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Time Picker */
        .time-picker-container {
            margin-top: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
            display: none;
        }

        .time-picker-container.visible {
            display: block;
        }

        .time-input-group {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }

        .time-input {
            width: 70px;
            padding: 12px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }

        .time-separator {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .suggested-times {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .time-quick-btn {
            padding: 8px 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .time-quick-btn:hover {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        /* Pin Duration */
        .pin-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 16px;
        }

        .pin-btn {
            padding: 14px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .pin-btn:hover {
            background: var(--hover-bg);
            border-color: var(--accent-blue);
        }

        .pin-btn.selected {
            border-color: var(--accent-blue);
            background: var(--accent-blue);
            color: white;
        }

        .pin-btn-label {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .pin-btn-desc {
            font-size: 11px;
            opacity: 0.8;
        }

        /* Slider */
        .slider-container {
            padding: 20px 16px;
        }

        .slider-value {
            text-align: center;
            margin-bottom: 20px;
        }

        .slider-number {
            font-size: 48px;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 4px;
        }

        .slider-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--bg-secondary);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.5);
        }

        .slider::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.5);
        }

        /* Summary */
        .summary-grid {
            display: grid;
            gap: 12px;
        }

        .summary-item {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .summary-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .summary-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .summary-total {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-green) 100%);
            color: white;
            padding: 20px;
            border-radius: 16px;
            margin-top: 16px;
        }

        .summary-total-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .summary-total-price {
            font-size: 36px;
            font-weight: 700;
        }

        /* Payment Methods */
        .payment-grid {
            display: grid;
            gap: 12px;
        }

        .payment-btn {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 14px;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .payment-btn:hover {
            background: var(--hover-bg);
            border-color: var(--accent-blue);
        }

        .payment-btn.selected {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, rgba(82, 196, 26, 0.15) 0%, rgba(82, 196, 26, 0.1) 100%);
        }

        .payment-icon {
            width: 52px;
            height: 52px;
            background: var(--bg-primary);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            flex-shrink: 0;
        }

        .payment-btn.selected .payment-icon {
            background: var(--accent-green);
        }

        .payment-content {
            flex: 1;
        }

        .payment-name {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .payment-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Currency Selector */
        .currency-selector {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .currency-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .currency-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .currency-btn {
            padding: 10px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            font-size: 14px;
            text-align: center;
        }

        .currency-btn:hover {
            background: var(--hover-bg);
        }

        .currency-btn.selected {
            border-color: var(--accent-blue);
            background: var(--accent-blue);
            color: white;
        }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 16px 20px;
            border-radius: 12px;
            font-size: 13px;
            line-height: 1.5;
            max-width: 280px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }

        .tooltip.show {
            display: block;
        }

        /* Animations */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section.active {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="progress-bar">
        <div class="progress-container">
            <span class="progress-text" id="progressText">–í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞</span>
            <span class="progress-count"><span id="currentStep">0</span>/7</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
    </div>

    <div class="container">
        <!-- Step 1: Tariff Selection -->
        <div class="section active" id="step1">
            <div class="section-header">
                <div class="section-number">1</div>
                <div class="section-title">
                    <h2 id="step1Title">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ</h2>
                    <p id="step1Desc">–ë–∞–∑–æ–≤—ã–π –ø–∞–∫–µ—Ç –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</p>
                </div>
                <div class="help-icon" onclick="showTooltip(event, 'tariff')">?</div>
            </div>

            <div class="currency-selector">
                <div class="currency-label" id="currencyLabel">–í–∞–ª—é—Ç–∞</div>
                <div class="currency-buttons">
                    <div class="currency-btn selected" data-currency="RUB" onclick="selectCurrency('RUB')">‚ÇΩ RUB</div>
                    <div class="currency-btn" data-currency="USD" onclick="selectCurrency('USD')">$ USD</div>
                    <div class="currency-btn" data-currency="CNY" onclick="selectCurrency('CNY')">¬• CNY</div>
                </div>
            </div>

            <div class="tariff-grid">
                <div class="tariff-card" onclick="selectTariff('basic')">
                    <div class="tariff-badge basic">BASIC</div>
                    <div class="tariff-name" data-i18n="tariff.basic.name">–ë–∞–∑–æ–≤—ã–π</div>
                    <div class="tariff-price">
                        <span id="basicPrice">500</span> <small id="basicCurrency">‚ÇΩ</small>
                    </div>
                    <ul class="tariff-features">
                        <li data-i18n="tariff.basic.feat1">1 –∫–∞–Ω–∞–ª —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</li>
                        <li data-i18n="tariff.basic.feat2">–ü—É–±–ª–∏–∫–∞—Ü–∏—è 1 –æ–±—ä—è–≤–ª–µ–Ω–∏—è</li>
                        <li data-i18n="tariff.basic.feat3">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</li>
                    </ul>
                </div>

                <div class="tariff-card" onclick="selectTariff('standard')">
                    <div class="tariff-badge standard">STANDARD</div>
                    <div class="tariff-name" data-i18n="tariff.standard.name">–°—Ç–∞–Ω–¥–∞—Ä—Ç</div>
                    <div class="tariff-price">
                        <span id="standardPrice">1200</span> <small id="standardCurrency">‚ÇΩ</small>
                    </div>
                    <ul class="tariff-features">
                        <li data-i18n="tariff.standard.feat1">3 –∫–∞–Ω–∞–ª–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</li>
                        <li data-i18n="tariff.standard.feat2">–ü—É–±–ª–∏–∫–∞—Ü–∏—è 3 –æ–±—ä—è–≤–ª–µ–Ω–∏–π</li>
                        <li data-i18n="tariff.standard.feat3">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</li>
                        <li data-i18n="tariff.standard.feat4">–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</li>
                    </ul>
                </div>

                <div class="tariff-card" onclick="selectTariff('premium')">
                    <div class="tariff-badge premium">PREMIUM</div>
                    <div class="tariff-name" data-i18n="tariff.premium.name">–ü—Ä–µ–º–∏—É–º</div>
                    <div class="tariff-price">
                        <span id="premiumPrice">2500</span> <small id="premiumCurrency">‚ÇΩ</small>
                    </div>
                    <ul class="tariff-features">
                        <li data-i18n="tariff.premium.feat1">10 –∫–∞–Ω–∞–ª–æ–≤ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</li>
                        <li data-i18n="tariff.premium.feat2">–ë–µ–∑–ª–∏–º–∏—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π</li>
                        <li data-i18n="tariff.premium.feat3">VIP –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</li>
                        <li data-i18n="tariff.premium.feat4">–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</li>
                        <li data-i18n="tariff.premium.feat5">–ê–≤—Ç–æ–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Step 2: Placement Type -->
        <div class="section" id="step2">
            <div class="section-header">
                <div class="section-number">2</div>
                <div class="section-title">
                    <h2 id="step2Title">–¢–∏–ø —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</h2>
                    <p id="step2Desc">–†–∞–∑–æ–≤–æ–µ –∏–ª–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ</p>
                </div>
                <div class="help-icon" onclick="showTooltip(event, 'placement')">?</div>
            </div>
            <div class="option-grid">
                <div class="option-btn" onclick="selectPlacementType('onetime')">
                    <div class="option-icon">üìå</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="placement.onetime.title">–†–∞–∑–æ–≤–æ–µ</div>
                        <div class="option-desc" data-i18n="placement.onetime.desc">–û–¥–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è</div>
                    </div>
                </div>
                <div class="option-btn" onclick="selectPlacementType('subscription')">
                    <div class="option-icon">üîÑ</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="placement.subscription.title">–ü–æ–¥–ø–∏—Å–∫–∞</div>
                        <div class="option-desc" data-i18n="placement.subscription.desc">–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: Publication Time -->
        <div class="section" id="step3">
            <div class="section-header">
                <div class="section-number">3</div>
                <div class="section-title">
                    <h2 id="step3Title">–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</h2>
                    <p id="step3Desc">–°–µ–π—á–∞—Å –∏–ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</p>
                </div>
                <div class="help-icon" onclick="showTooltip(event, 'time')">?</div>
            </div>
            <div class="option-grid">
                <div class="option-btn" onclick="selectPublicationTime('immediate')">
                    <div class="option-icon">‚ö°</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="time.immediate.title">–°–µ–π—á–∞—Å</div>
                        <div class="option-desc" data-i18n="time.immediate.desc">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ</div>
                    </div>
                </div>
                <div class="option-btn" onclick="selectPublicationTime('scheduled')">
                    <div class="option-icon">‚è∞</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="time.scheduled.title">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</div>
                        <div class="option-desc" data-i18n="time.scheduled.desc">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è</div>
                    </div>
                </div>
            </div>

            <div class="time-picker-container" id="timePicker">
                <div class="time-input-group">
                    <input type="number" class="time-input" id="hours" min="0" max="23" value="12" placeholder="–ß–ß">
                    <span class="time-separator">:</span>
                    <input type="number" class="time-input" id="minutes" min="0" max="59" value="00" placeholder="–ú–ú">
                </div>
                <div class="suggested-times">
                    <div class="time-quick-btn" onclick="setTime(9, 0)">09:00</div>
                    <div class="time-quick-btn" onclick="setTime(12, 0)">12:00</div>
                    <div class="time-quick-btn" onclick="setTime(15, 0)">15:00</div>
                    <div class="time-quick-btn" onclick="setTime(18, 0)">18:00</div>
                    <div class="time-quick-btn" onclick="setTime(21, 0)">21:00</div>
                </div>
            </div>
        </div>

        <!-- Step 4: Pinning -->
        <div class="section" id="step4">
            <div class="section-header">
                <div class="section-number">4</div>
                <div class="section-title">
                    <h2 id="step4Title">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ</h2>
                    <p id="step4Desc">–°–¥–µ–ª–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–Ω–µ–µ</p>
                </div>
                <div class="help-icon" onclick="showTooltip(event, 'pin')">?</div>
            </div>
            <div class="option-grid">
                <div class="option-btn" onclick="selectPinning('no')">
                    <div class="option-icon">‚ûñ</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="pin.no.title">–ù–µ –∑–∞–∫—Ä–µ–ø–ª—è—Ç—å</div>
                        <div class="option-desc" data-i18n="pin.no.desc">–û–±—ã—á–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è</div>
                    </div>
                </div>
                <div class="option-btn" onclick="selectPinning('yes')">
                    <div class="option-icon">üìç</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="pin.yes.title">–ó–∞–∫—Ä–µ–ø–∏—Ç—å</div>
                        <div class="option-desc" data-i18n="pin.yes.desc">–ë—É–¥–µ—Ç –≤ —Ç–æ–ø–µ –∫–∞–Ω–∞–ª–∞</div>
                    </div>
                </div>
            </div>

            <div class="pin-options" id="pinDurationPicker" style="display: none;">
                <div class="pin-btn" onclick="selectPinDuration(1)">
                    <div class="pin-btn-label">1</div>
                    <div class="pin-btn-desc" data-i18n="pin.day">–¥–µ–Ω—å</div>
                </div>
                <div class="pin-btn" onclick="selectPinDuration(3)">
                    <div class="pin-btn-label">3</div>
                    <div class="pin-btn-desc" data-i18n="pin.days3">–¥–Ω—è</div>
                </div>
                <div class="pin-btn" onclick="selectPinDuration(7)">
                    <div class="pin-btn-label">7</div>
                    <div class="pin-btn-desc" data-i18n="pin.days7">–¥–Ω–µ–π</div>
                </div>
            </div>
        </div>

        <!-- Step 5: Ad Format -->
        <div class="section" id="step5">
            <div class="section-header">
                <div class="section-number">5</div>
                <div class="section-title">
                    <h2 id="step5Title">–§–æ—Ä–º–∞—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
                    <p id="step5Desc">–¢–µ–∫—Å—Ç, —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ</p>
                </div>
                <div class="help-icon" onclick="showTooltip(event, 'format')">?</div>
            </div>
            <div class="option-grid">
                <div class="option-btn" onclick="selectFormat('text')">
                    <div class="option-icon">üìù</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="format.text.title">–¢–µ–∫—Å—Ç</div>
                        <div class="option-desc" data-i18n="format.text.desc">–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</div>
                    </div>
                </div>
                <div class="option-btn" onclick="selectFormat('image')">
                    <div class="option-icon">üñºÔ∏è</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="format.image.title">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
                        <div class="option-desc" data-i18n="format.image.desc">–§–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é</div>
                    </div>
                </div>
                <div class="option-btn" onclick="selectFormat('video')">
                    <div class="option-icon">üé¨</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="format.video.title">–í–∏–¥–µ–æ</div>
                        <div class="option-desc" data-i18n="format.video.desc">–í–∏–¥–µ–æ—Ä–æ–ª–∏–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º</div>
                    </div>
                </div>
                <div class="option-btn" onclick="selectFormat('combined')">
                    <div class="option-icon">üì±</div>
                    <div class="option-content">
                        <div class="option-title" data-i18n="format.combined.title">–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</div>
                        <div class="option-desc" data-i18n="format.combined.desc">–ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 6: Duration -->
        <div class="section" id="step6">
            <div class="section-header">
                <div class="section-number">6</div>
                <div class="section-title">
                    <h2 id="step6Title">–°—Ä–æ–∫ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</h2>
                    <p id="step6Desc">–ö–∞–∫ –¥–æ–ª–≥–æ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</p>
                </div>
                <div class="help-icon" onclick="showTooltip(event, 'duration')">?</div>
            </div>
            <div class="slider-container">
                <div class="slider-value">
                    <div class="slider-number" id="durationValue">30</div>
                    <div class="slider-label" id="durationLabel">–¥–Ω–µ–π</div>
                </div>
                <input type="range" min="1" max="90" value="30" class="slider" id="durationSlider" oninput="updateDuration(this.value)">
            </div>
        </div>

        <!-- Step 7: Summary & Payment -->
        <div class="section" id="step7">
            <div class="section-header">
                <div class="section-number">7</div>
                <div class="section-title">
                    <h2 id="step7Title">–ò—Ç–æ–≥–æ –∏ –æ–ø–ª–∞—Ç–∞</h2>
                    <p id="step7Desc">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–∫–∞–∑ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</p>
                </div>
            </div>

            <div class="summary-grid">
                <div class="summary-item">
                    <span class="summary-label" data-i18n="summary.tariff">–¢–∞—Ä–∏—Ñ:</span>
                    <span class="summary-value" id="summaryTariff">‚Äî</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label" data-i18n="summary.placement">–¢–∏–ø —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:</span>
                    <span class="summary-value" id="summaryPlacement">‚Äî</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label" data-i18n="summary.time">–í—Ä–µ–º—è:</span>
                    <span class="summary-value" id="summaryTime">‚Äî</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label" data-i18n="summary.pin">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ:</span>
                    <span class="summary-value" id="summaryPin">‚Äî</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label" data-i18n="summary.format">–§–æ—Ä–º–∞—Ç:</span>
                    <span class="summary-value" id="summaryFormat">‚Äî</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label" data-i18n="summary.duration">–°—Ä–æ–∫:</span>
                    <span class="summary-value" id="summaryDuration">‚Äî</span>
                </div>
            </div>

            <div class="summary-total">
                <div class="summary-total-label" data-i18n="summary.total">–ö –æ–ø–ª–∞—Ç–µ:</div>
                <div class="summary-total-price">
                    <span id="totalPrice">0</span> <span id="totalCurrency">‚ÇΩ</span>
                </div>
            </div>

            <div style="margin-top: 24px;">
                <div class="section-title" style="margin-bottom: 16px;">
                    <h2 id="paymentMethodTitle">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h2>
                    <p id="paymentMethodDesc">–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç</p>
                </div>
                <div class="payment-grid">
                    <div class="payment-btn" onclick="selectPayment('stars')">
                        <div class="payment-icon">‚≠ê</div>
                        <div class="payment-content">
                            <div class="payment-name" data-i18n="payment.stars.name">Telegram Stars</div>
                            <div class="payment-desc" data-i18n="payment.stars.desc">–ë—ã—Å—Ç—Ä–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram</div>
                        </div>
                    </div>
                    <div class="payment-btn" onclick="selectPayment('card')">
                        <div class="payment-icon">üí≥</div>
                        <div class="payment-content">
                            <div class="payment-name" data-i18n="payment.card.name">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</div>
                            <div class="payment-desc" data-i18n="payment.card.desc">Visa, Mastercard, –ú–ò–†</div>
                        </div>
                    </div>
                    <div class="payment-btn" onclick="selectPayment('crypto')">
                        <div class="payment-icon">‚Çø</div>
                        <div class="payment-content">
                            <div class="payment-name" data-i18n="payment.crypto.name">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</div>
                            <div class="payment-desc" data-i18n="payment.crypto.desc">BTC, ETH, USDT</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // Get language from URL
        const urlParams = new URLSearchParams(window.location.search);
        const userLang = urlParams.get('lang') || 'ru';

        // Translation data
        const translations = {
            ru: {
                progressSteps: ['–¢–∞—Ä–∏—Ñ', '–¢–∏–ø', '–í—Ä–µ–º—è', '–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ', '–§–æ—Ä–º–∞—Ç', '–°—Ä–æ–∫', '–û–ø–ª–∞—Ç–∞'],
                tooltips: {
                    tariff: '–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∞—Ä–∏—Ñ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–Ω–∞–ª–æ–≤ –∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π',
                    placement: '–†–∞–∑–æ–≤–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ - –æ–¥–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è. –ü–æ–¥–ø–∏—Å–∫–∞ - —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å –∑–∞–¥–∞–Ω–Ω–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å—é',
                    time: '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –∏–ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é –Ω–∞ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è',
                    pin: '–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –∫–∞–Ω–∞–ª–∞',
                    format: '–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç: —Ç–µ–∫—Å—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –≤–∏–¥–µ–æ –∏–ª–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç',
                    duration: '–°—Ä–æ–∫, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –≤ –∫–∞–Ω–∞–ª–µ'
                },
                days: '–¥–Ω–µ–π',
                day: '–¥–µ–Ω—å',
                days3: '–¥–Ω—è',
                days7: '–¥–Ω–µ–π'
            },
            en: {
                progressSteps: ['Plan', 'Type', 'Time', 'Pin', 'Format', 'Duration', 'Payment'],
                tooltips: {
                    tariff: 'Choose a suitable plan based on the number of channels and ads',
                    placement: 'One-time placement - single publication. Subscription - regular publications',
                    time: 'Post immediately or schedule for a convenient time',
                    pin: 'Pinned ad always stays at the top of the channel',
                    format: 'Choose format: text, image, video, or combined',
                    duration: 'Duration for which the ad will be visible in the channel'
                },
                days: 'days',
                day: 'day',
                days3: 'days',
                days7: 'days'
            },
            'zh-tw': {
                progressSteps: ['ÊñπÊ°à', 'È°ûÂûã', 'ÊôÇÈñì', 'ÁΩÆÈ†Ç', 'Ê†ºÂºè', 'ÊúüÈôê', '‰ªòÊ¨æ'],
                tooltips: {
                    tariff: 'Ê†πÊìöÈ†ªÈÅìÂíåÂª£ÂëäÊï∏ÈáèÈÅ∏ÊìáÂêàÈÅ©ÁöÑÊñπÊ°à',
                    placement: '‰∏ÄÊ¨°ÊÄßÊäïÊîæ - ÂñÆÊ¨°ÁôºÂ∏É„ÄÇË®ÇÈñ± - ÂÆöÊúüÁôºÂ∏É',
                    time: 'Á´ãÂç≥ÁôºÂ∏ÉÊàñÂÆâÊéíÊñπ‰æøÁöÑÊôÇÈñì',
                    pin: 'ÁΩÆÈ†ÇÂª£ÂëäÂßãÁµÇ‰ΩçÊñºÈ†ªÈÅìÈ†ÇÈÉ®',
                    format: 'ÈÅ∏ÊìáÊ†ºÂºèÔºöÊñáÂ≠ó„ÄÅÂúñÁâá„ÄÅË¶ñÈ†ªÊàñÁµÑÂêà',
                    duration: 'Âª£ÂëäÂú®È†ªÈÅì‰∏≠ÂèØË¶ãÁöÑÊåÅÁ∫åÊôÇÈñì'
                },
                days: 'Â§©',
                day: 'Â§©',
                days3: 'Â§©',
                days7: 'Â§©'
            }
        };

        const t = translations[userLang] || translations.ru;

        // State
        let currentStep = 0;
        let selectedData = {
            tariff: null,
            currency: 'RUB',
            placementType: null,
            publicationTime: null,
            scheduledTime: null,
            pinning: null,
            pinDuration: null,
            format: null,
            duration: 30,
            payment: null
        };

        // Tariff prices in different currencies
        const tariffPrices = {
            basic: { RUB: 500, USD: 6, CNY: 40 },
            standard: { RUB: 1200, USD: 14, CNY: 95 },
            premium: { RUB: 2500, USD: 30, CNY: 200 }
        };

        // Initialize
        updateProgress();

        function selectCurrency(currency) {
            selectedData.currency = currency;
            document.querySelectorAll('.currency-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.currency === currency);
            });
            updateTariffPrices();
        }

        function updateTariffPrices() {
            const currency = selectedData.currency;
            const symbols = { RUB: '‚ÇΩ', USD: '$', CNY: '¬•' };
            
            ['basic', 'standard', 'premium'].forEach(tariff => {
                document.getElementById(`${tariff}Price`).textContent = tariffPrices[tariff][currency];
                document.getElementById(`${tariff}Currency`).textContent = symbols[currency];
            });
        }

        function selectTariff(tariff) {
            selectedData.tariff = tariff;
            document.querySelectorAll('.tariff-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            setTimeout(() => goToStep(2), 400);
        }

        function selectPlacementType(type) {
            selectedData.placementType = type;
            document.querySelectorAll('#step2 .option-btn').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            setTimeout(() => goToStep(3), 400);
        }

        function selectPublicationTime(time) {
            selectedData.publicationTime = time;
            document.querySelectorAll('#step3 .option-btn').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            const timePicker = document.getElementById('timePicker');
            if (time === 'scheduled') {
                timePicker.classList.add('visible');
            } else {
                timePicker.classList.remove('visible');
                setTimeout(() => goToStep(4), 400);
            }
        }

        function setTime(hours, minutes) {
            document.getElementById('hours').value = hours.toString().padStart(2, '0');
            document.getElementById('minutes').value = minutes.toString().padStart(2, '0');
            selectedData.scheduledTime = `${hours}:${minutes}`;
            setTimeout(() => goToStep(4), 400);
        }

        function selectPinning(pin) {
            selectedData.pinning = pin;
            document.querySelectorAll('#step4 .option-btn').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            const pinPicker = document.getElementById('pinDurationPicker');
            if (pin === 'yes') {
                pinPicker.style.display = 'grid';
            } else {
                pinPicker.style.display = 'none';
                selectedData.pinDuration = null;
                setTimeout(() => goToStep(5), 400);
            }
        }

        function selectPinDuration(days) {
            selectedData.pinDuration = days;
            document.querySelectorAll('.pin-btn').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            setTimeout(() => goToStep(5), 400);
        }

        function selectFormat(format) {
            selectedData.format = format;
            document.querySelectorAll('#step5 .option-btn').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            setTimeout(() => goToStep(6), 400);
        }

        function updateDuration(value) {
            selectedData.duration = parseInt(value);
            document.getElementById('durationValue').textContent = value;
            
            // Update label
            let label = t.days;
            if (userLang === 'ru') {
                if (value == 1) label = t.day;
                else if (value >= 2 && value <= 4) label = t.days3;
                else label = t.days7;
            }
            document.getElementById('durationLabel').textContent = label;
            
            // Auto-advance after selection
            clearTimeout(window.durationTimer);
            window.durationTimer = setTimeout(() => goToStep(7), 800);
        }

        function selectPayment(method) {
            selectedData.payment = method;
            document.querySelectorAll('.payment-btn').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            // Enable main button
            tg.MainButton.setText(userLang === 'ru' ? '–û–ø–ª–∞—Ç–∏—Ç—å' : userLang === 'en' ? 'Pay' : 'ÊîØ‰ªò');
            tg.MainButton.show();
            tg.MainButton.enable();
        }

        function goToStep(stepNum) {
            // Mark current as completed
            if (currentStep > 0) {
                document.getElementById(`step${currentStep}`).classList.remove('active');
                document.getElementById(`step${currentStep}`).classList.add('completed');
            }
            
            // Activate new step
            currentStep = stepNum;
            const stepEl = document.getElementById(`step${stepNum}`);
            stepEl.classList.remove('completed');
            stepEl.classList.add('active');
            
            // Scroll to step
            stepEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Update progress
            updateProgress();
            
            // Update summary if at final step
            if (stepNum === 7) {
                updateSummary();
            }
        }

        function updateProgress() {
            const progress = (currentStep / 7) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('currentStep').textContent = currentStep;
            if (currentStep > 0) {
                document.getElementById('progressText').textContent = t.progressSteps[currentStep - 1];
            }
        }

        function updateSummary() {
            const symbols = { RUB: '‚ÇΩ', USD: '$', CNY: '¬•' };
            
            // Tariff
            const tariffNames = {
                ru: { basic: '–ë–∞–∑–æ–≤—ã–π', standard: '–°—Ç–∞–Ω–¥–∞—Ä—Ç', premium: '–ü—Ä–µ–º–∏—É–º' },
                en: { basic: 'Basic', standard: 'Standard', premium: 'Premium' },
                'zh-tw': { basic: 'Âü∫Êú¨', standard: 'Ê®ôÊ∫ñ', premium: 'È´òÁ¥ö' }
            };
            document.getElementById('summaryTariff').textContent = tariffNames[userLang][selectedData.tariff] || '‚Äî';
            
            // Placement
            const placementNames = {
                ru: { onetime: '–†–∞–∑–æ–≤–æ–µ', subscription: '–ü–æ–¥–ø–∏—Å–∫–∞' },
                en: { onetime: 'One-time', subscription: 'Subscription' },
                'zh-tw': { onetime: '‰∏ÄÊ¨°ÊÄß', subscription: 'Ë®ÇÈñ±' }
            };
            document.getElementById('summaryPlacement').textContent = placementNames[userLang][selectedData.placementType] || '‚Äî';
            
            // Time
            const timeNames = {
                ru: { immediate: '–°–µ–π—á–∞—Å', scheduled: '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ' },
                en: { immediate: 'Immediate', scheduled: 'Scheduled' },
                'zh-tw': { immediate: 'Á´ãÂç≥', scheduled: 'È†êÂÆö' }
            };
            let timeText = timeNames[userLang][selectedData.publicationTime] || '‚Äî';
            if (selectedData.publicationTime === 'scheduled' && selectedData.scheduledTime) {
                timeText += ` (${selectedData.scheduledTime})`;
            }
            document.getElementById('summaryTime').textContent = timeText;
            
            // Pin
            const pinNames = {
                ru: { no: '–ù–µ—Ç', yes: '–î–∞' },
                en: { no: 'No', yes: 'Yes' },
                'zh-tw': { no: 'Âê¶', yes: 'ÊòØ' }
            };
            let pinText = pinNames[userLang][selectedData.pinning] || '‚Äî';
            if (selectedData.pinning === 'yes' && selectedData.pinDuration) {
                pinText += ` (${selectedData.pinDuration} ${selectedData.pinDuration === 1 ? t.day : t.days})`;
            }
            document.getElementById('summaryPin').textContent = pinText;
            
            // Format
            const formatNames = {
                ru: { text: '–¢–µ–∫—Å—Ç', image: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', video: '–í–∏–¥–µ–æ', combined: '–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π' },
                en: { text: 'Text', image: 'Image', video: 'Video', combined: 'Combined' },
                'zh-tw': { text: 'ÊñáÂ≠ó', image: 'ÂúñÁâá', video: 'Ë¶ñÈ†ª', combined: 'ÁµÑÂêà' }
            };
            document.getElementById('summaryFormat').textContent = formatNames[userLang][selectedData.format] || '‚Äî';
            
            // Duration
            document.getElementById('summaryDuration').textContent = `${selectedData.duration} ${selectedData.duration === 1 ? t.day : t.days}`;
            
            // Total price
            const basePrice = tariffPrices[selectedData.tariff][selectedData.currency];
            document.getElementById('totalPrice').textContent = basePrice;
            document.getElementById('totalCurrency').textContent = symbols[selectedData.currency];
        }

        function showTooltip(event, type) {
            const tooltip = document.getElementById('tooltip');
            tooltip.textContent = t.tooltips[type];
            tooltip.classList.add('show');
            
            const rect = event.target.getBoundingClientRect();
            tooltip.style.top = (rect.top - tooltip.offsetHeight - 10) + 'px';
            tooltip.style.left = (rect.left - tooltip.offsetWidth / 2 + rect.width / 2) + 'px';
            
            setTimeout(() => {
                tooltip.classList.remove('show');
            }, 3000);
        }

        // Hide tooltip on scroll
        document.addEventListener('scroll', () => {
            document.getElementById('tooltip').classList.remove('show');
        });

        // Main button handler
        tg.MainButton.onClick(() => {
            tg.sendData(JSON.stringify(selectedData));
        });

        // Initial state
        tg.MainButton.hide();
    </script>
</body>
</html>
